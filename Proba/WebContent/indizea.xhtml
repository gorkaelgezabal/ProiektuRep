<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

<h:head>
	<f:facet name="first">
		<meta http-equiv="X-UA-Compatible" content="EmulateIE8" />
		<meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />
		<title>ACB Ligako Datu analizatzailea</title>
		<link type="text/css" rel="stylesheet"
			href="#{request.contextPath}/resources/css/style.css" />
		<!-- 			<h:outputStylesheet library="css" name="style.css"  /> -->

	</f:facet>

</h:head>

<h:body>
	<h:outputScript library="js" name="common.js" />
	<p:panel header="Datu eskuraketa">
		<h:form>
			<p:tabMenu activeIndex="0">
				<p:menuitem value="1.-Datu eskuraketa" url="/faces/indizea.xhtml"
					icon="ui-icon-wrench" /> 
				<p:menuitem value="2.-Datu analisia" url="/faces/parseatzailea.xhtml" 
					icon="ui-icon-search" />
			</p:tabMenu>
			<p:fieldset legend="Ongietorri">
				<h:panelGrid columns="2" cellpadding="10">

					<h:outputText
						value="Ongietorri datuen ACBko datu analizatzailera. Begi bistako den moduan, datu analisia burutzeko hiru pauso jarraitu behar ditugu. 
            Lehenik analisirako erabiliko dugun datu multzoa eskuratuko dugu. Ondoren datu multzoa birfinduko da, datuak formatu egokian datu-baseratuz eta alferrikako datuak ezabatuz. Hau eginda prest gaude, 
            behar ditugun fitxategi eta dokumentuak sorrarazteko gure analisirako." />
				</h:panelGrid>
			</p:fieldset>
			<p:separator id="separator" />


			<p:growl id="growl" />
			<h3>Deskarga</h3>
			<p:messages id="messages" showDetail="true" autoUpdate="true" />
			<br/>
			<p:commandButton value="Start" type="button"
				onclick="pbAjax.start();startButton2.disable();start();"
				widgetVar="startButton2" />
			<p:commandButton value="Cancel"
				actionListener="#{progressBean.cancel}"
				oncomplete="pbAjax.cancel();startButton2.enable();" />
			
			<p:separator id="separator3" />
			
			<p:progressBar widgetVar="pbAjax" id = "pbClient" ajax="true" value="#{progressBean.progress}" labelTemplate="{value}%" styleClass="animated" interval="300" disabled="false">
				<p:ajax event="complete" listener="#{progressBean.onComplete}" update="messages"
					oncomplete="startButton2.enable();remoteEnable();"/>

			</p:progressBar>
			
			<p:remoteCommand name="remoteEnable" update="parserButton">  
        		<f:setPropertyActionListener value="#{false}"  target="#{bean.disable}" />  
   			 </p:remoteCommand>
   			 

			<p:separator id="separator2" />

			<p:commandButton value="Parseatu" widgetVar="parserButton" id="parserButton" 
				disabled="#{bean.disable}" actionListener="#{progressBean.parseatu()}" 
				update="growl" />

		</h:form>


	</p:panel>

</h:body>
</html>